<Project>
  <PropertyGroup>
    <TargetFrameworks>netstandard1.6;net46</TargetFrameworks>
    <AssemblyName>Microsoft.R.Components</AssemblyName>
    <RootNamespace>Microsoft.R.Components</RootNamespace>
  </PropertyGroup>
  <Import Project="..\..\..\R.Settings.NetCore.props" />
  <Import Project="Sdk.props" Sdk="Microsoft.NET.Sdk" />
  <Import Project="..\..\..\R.Settings.props" />
  <ItemGroup>
    <Compile Remove="ConnectionManager\Implementation\**" />
    <EmbeddedResource Remove="ConnectionManager\Implementation\**" />
    <None Remove="ConnectionManager\Implementation\**" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="$(SourceDirectory)GlobalAssemblyInfo.cs" Link="Properties\GlobalAssemblyInfo.cs" />
    <Compile Include="$(SourceDirectory)AssemblyVersionInfo.cs" Link="Properties\AssemblyVersionInfo.cs" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="MicroBuild.Core" Version="0.2.0" />
    <PackageReference Include="System.Collections.Immutable" Version="1.3.1" />
  </ItemGroup>
  <ItemGroup Condition="'$(TargetFramework)' == 'netstandard1.6'">
    <PackageReference Include="System.Net.Http" Version="4.3.2" />
  </ItemGroup>
  <ItemGroup Condition="'$(TargetFramework)' == 'net46'">
    <Reference Include="System" />
    <Reference Include="Microsoft.CSharp" />
    <PackageReference Include="System.Net.Http" Version="4.0.0" />
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="$(SourceDirectory)Common\Core\Impl\Microsoft.R.Common.Core.csproj">
      <Project>{8d408909-459f-4853-a36c-745118f99869}</Project>
      <Name>Microsoft.Common.Core</Name>
    </ProjectReference>
    <ProjectReference Include="$(SourceDirectory)Host\Client\Impl\Microsoft.R.Host.Client.csproj">
      <Project>{b81d01eb-ad08-4929-be99-6623af523a23}</Project>
      <Name>Microsoft.R.Host.Client</Name>
    </ProjectReference>
    <ProjectReference Include="$(SourceDirectory)Host\Protocol\Impl\Microsoft.R.Host.Protocol.csproj">
      <Project>{c46e5f53-4caf-4c65-b173-ca8140fb41e0}</Project>
      <Name>Microsoft.R.Host.Protocol</Name>
    </ProjectReference>
    <ProjectReference Include="$(SourceDirectory)Languages\Core\Impl\Microsoft.Languages.Core.csproj">
      <Project>{25CD8690-6208-4740-B123-6DBCE6B9444A}</Project>
      <Name>Microsoft.Languages.Core</Name>
    </ProjectReference>
    <ProjectReference Include="$(SourceDirectory)R\Core\Impl\Microsoft.R.Core.csproj">
      <Project>{0C4BCE1D-3CB8-4E2A-9252-58784D7F26A5}</Project>
      <Name>Microsoft.R.Core</Name>
    </ProjectReference>
    <ProjectReference Include="$(SourceDirectory)R\Interpreters\Impl\Microsoft.R.Interpreters.csproj">
      <Project>{8445A4FB-4443-432C-94E8-1408559B7F58}</Project>
      <Name>Microsoft.R.Interpreters</Name>
    </ProjectReference>
    <ProjectReference Include="..\..\..\Containers\Impl\Microsoft.R.Containers.csproj" />
  </ItemGroup>
  <ItemGroup>
    <Folder Include="Properties\" />
  </ItemGroup>
  <ItemGroup>
    <None Update="Containers\Implementation\Dockerfile">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
  </ItemGroup>
  <Import Project="Sdk.targets" Sdk="Microsoft.NET.Sdk" />
  <Import Project="$(SourceDirectory)R.Build.Version.targets" />
  <Import Project="$(SourceDirectory)R.Build.Sign.targets" />
  <Import Project="$(SourceDirectory)R.Workarounds.targets" />
  <ItemGroup>
    <Dockerfile Include="Containers\Implementation\Dockerfile" />
  </ItemGroup>
  <Target Name="AfterBuild">
    <Copy SourceFiles="@(Dockerfile)" DestinationFolder="$(BinDirectory)\$(Configuration)" />
  </Target>
</Project>